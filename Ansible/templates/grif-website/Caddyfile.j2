{
    # Set your email for ACME/Letâ€™s Encrypt notices
    email {{ admin_email }}
    admin off
}

# Redirect www -> apex (optional)
www.{{ site_url }} {
	redir https://{{ site_url }}{uri}
}

# Public site with TLS
{{ site_url }} {
    encode zstd gzip
    @assets {
        path *.css *.js *.mjs *.ico *.png *.jpg *.jpeg *.svg *.webp *.woff *.woff2
    }
    header {
        X-Content-Type-Options nosniff
        Referrer-Policy strict-origin-when-cross-origin
        X-Frame-Options DENY
        Permissions-Policy camera=(), microphone=(), geolocation=()
        Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
    }

    reverse_proxy app:8080
}

